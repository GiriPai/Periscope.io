<!DOCTYPE html>
<html lang="en">
  <head>

    <title>Periscope</title>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/css/jumbotron-narrow.css" rel="stylesheet">
    <link href="../static/main.css" rel="stylesheet">
    <script src="../static/js/jquery-1.11.3.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>
    <!--<script src="../static/js/main.js"></script>-->
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>

    <script>
      $(function () 
      {
        {% for val in name %}

          $('#main').append('<div id={{loop.index}} class = "mine" style = "width: 350px; height: 350px; diplay:inline">');
          $('#main').append('<button href="#" id = {{loop.index}} class = "btn btn-default btn-sm"><span class="glyphicon glyphicon-pencil"></span></button>');
          $('#{{loop.index}}').highcharts(
          {
            chart: {
                type: '{{ val[1]|safe }}'
            },
            title: {
                text: 'Chart'
            },
            xAxis: {
                type: 'linear',
                title: {
                    text: '{{ val[2]|safe }}'
                }
            },
            yAxis: {
                type: 'linear',
                min: 0,
                title: {
                    text: '{{ val[3]|safe }}'
                }
            },
            labels: {
              items: [{
                style: {
                    left: '50px',
                    top: '18px',
                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'black'
                }
              }]
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            series: [
            {% for serie in val[0] %}
            {
                name: "{{ serie['name']|safe}}",
                data: {{ serie['data']|safe}}
            },
            {% endfor %}
            ]
          });
        {% endfor %}
      
        $(".btn").click(function() {
          window.location.replace('/editChart?chart_num='+this.id);
        });

      });
    </script>
  </head>

  <body>
      
      <div class = "container">
        <div class="header">
          <nav>
            <ul class="nav nav-pills pull-right">
              <li role="presentation" class="active"><a href="/showAddQuery">Add Query</a></li>
            </ul>
          </nav>
          <h3 class="text-muted">Periscope</h3>
        </div>
      <div>

      <div id = "main">
    

      </div>
  
  </body>
</html>
